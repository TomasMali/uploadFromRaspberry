"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const os_1 = require("os");
const path_1 = require("path");
const load_json_file_1 = __importDefault(require("load-json-file"));
const write_json_file_1 = __importDefault(require("write-json-file"));
const output_1 = require("./output");
const schematics_1 = require("@angular-devkit/schematics");
const NOW_DIR = path_1.join(os_1.homedir(), ".now");
const AUTH_CONFIG_FILE_PATH = path_1.join(NOW_DIR, "auth.json");
/**
 * Reads auth config file
 */
exports.readAuthConfigFile = () => load_json_file_1.default.sync(AUTH_CONFIG_FILE_PATH);
/**
 * Write auth config
 * @param config auth config
 */
exports.writeToAuthConfigFile = (config) => {
    try {
        return write_json_file_1.default.sync(AUTH_CONFIG_FILE_PATH, config, { indent: 2 });
    }
    catch (err) {
        if (err.code === "EPERM") {
            throw new schematics_1.SchematicsException(`Not able to create ${output_1.highlight(AUTH_CONFIG_FILE_PATH)} (operation not permitted).`);
        }
        else if (err.code === "EBADF") {
            throw new schematics_1.SchematicsException(`Not able to create ${output_1.highlight(AUTH_CONFIG_FILE_PATH)} (bad file descriptor).`);
        }
        throw err;
    }
};
//# sourceMappingURL=filte.js.map